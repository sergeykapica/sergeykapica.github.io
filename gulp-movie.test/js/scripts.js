window.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("burger"),t=document.getElementById("menu");e.addEventListener("click",(()=>{t.classList.toggle("active"),e.classList.toggle("active")}));const s=new Swiper(".swiper-thumbs",{spaceBetween:-20,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,loop:!0});new Swiper(".swiper-main",{effect:"fade",fadeEffect:{crossFade:!1},loop:!0,thumbs:{swiper:s}}),new Swiper(".swiper-trends",{spaceBetween:14,slidesPerView:3,freeMode:!0,watchSlidesProgress:!0,loop:!0,breakpoints:{768:{slidesPerView:4},1024:{slidesPerView:6,spaceBetween:32}}});document.querySelectorAll(".swiper-block").forEach((e=>{let t=[];new Swiper(e.querySelector(".swiper-sections"),{spaceBetween:8,slidesPerView:5,freeMode:!0,watchSlidesProgress:!0,loop:!1,breakpoints:{768:{slidesPerView:6},1024:{slidesPerView:9,spaceBetween:22}},navigation:{nextEl:e.querySelector(".swiper-sections-wrapper__next-button"),prevEl:e.querySelector(".swiper-sections-wrapper__prev-button")}});const s=new Swiper(e.querySelector(".swiper-movies"),{spaceBetween:14,slidesPerView:3,freeMode:!0,watchSlidesProgress:!0,loop:!0,breakpoints:{768:{slidesPerView:4},1024:{slidesPerView:6,spaceBetween:32}},navigation:{nextEl:e.querySelector(".swiper-movies-wrapper__next-button"),prevEl:e.querySelector(".swiper-movies-wrapper__prev-button")}});function o(){e.querySelectorAll(".swiper-movies .swiper-slide__movie").forEach((e=>{const s=e.dataset.category;0===t.length||t.includes(s)?e.classList.remove("hidden"):e.classList.add("hidden")})),s.update()}e.querySelectorAll(".swiper-sections .swiper-slide__category").forEach((e=>{e.addEventListener("click",(()=>{const s=e.dataset.filter;e.classList.toggle("active"),e.classList.contains("active")?t.push(s):t=t.filter((e=>e!==s)),o()}))})),o()})),document.querySelectorAll(".tabs-block").forEach((e=>{const t=e.querySelectorAll('.tabs input[type="radio"]'),s=e.querySelectorAll('[id^="tab-"]');t.forEach((e=>{e.addEventListener("change",(()=>{s.forEach((t=>{const s=t.id==="tab-"+e.id;t.classList.toggle("hidden",!s)}))}))}))})),document.querySelectorAll(".swiper-block-2").forEach((e=>{new Swiper(e.querySelector(".swiper"),{spaceBetween:24,slidesPerView:2,freeMode:!0,watchSlidesProgress:!0,loop:!0,breakpoints:{768:{slidesPerView:4},1024:{slidesPerView:5,spaceBetween:32}}})})),document.querySelectorAll(".swiper-block-3").forEach((e=>{new Swiper(e.querySelector(".swiper"),{spaceBetween:16,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,loop:!0,breakpoints:{1024:{slidesPerView:6,spaceBetween:56}}})}));const o=new Swiper(".swiper-watch-list",{spaceBetween:24,slidesPerView:2,freeMode:!0,watchSlidesProgress:!0,loop:!0,breakpoints:{1024:{slidesPerView:3,spaceBetween:32}}}),r=document.getElementById("videos-watch-list"),n=document.getElementById("videoModal"),i=document.getElementById("closeModal"),a=document.getElementById("modalContainer");let l=null,c=null,d=null,u="";[{id:"ou8w0gQHlRE",name:"Назад в будущее"},{id:"HiBz6od8jaQ",name:"День сурка"},{id:"uATMU5ma0-8",name:"Куда приводят мечты"},{id:"Z78pnHnv-20",name:"Голый пистолет"},{id:"JwNXqFMQlnw",name:"Младенец на прогулке"},{id:"hR3rAGXSZ64",name:"Охотники за привидениями"},{id:"zDQHwzF1n4U",name:"Бетховен 1"},{id:"QyMzT-6vSd0",name:"Миссис Даутфайр"},{id:"dSDm62Hmbf4",name:"Плезантвиль"},{id:"UreHaK6DO-s",name:"Квантовый скачок"}].forEach((e=>{const t="video_progress_"+e.id,s="video_duration_"+e.id,o=parseFloat(localStorage.getItem(t))||0,r=parseFloat(localStorage.getItem(s))||0;let n=0;r>0&&(n=o/r*100),u+=`\n    <div class="swiper-slide relative rounded-[12px] overflow-hidden">\n      <img src="https://img.youtube.com/vi/${e.id}/hqdefault.jpg" alt="Video ${e.id}" class="w-full object-cover">\n      <div class="absolute inset-0 z-10">\n        <button\n          class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[34px] h-[34px] md:w-[56px] md:h-[56px] flex items-center justify-center rounded-full bg-orange-2 hover:bg-blue-2 transition-colors duration-150"\n          type="button"\n          data-video-id="${e.id}">\n          <svg class="w-3 h-3 md:w-6 md:h-6 ml-1">\n              <use xlink:href="./img/sprite.svg#play-video"></use>\n          </svg>\n        </button>\n        <div class="absolute bottom-[15px] inset-x-0">\n          <h3 class="hidden md:block text-xl leading-[24px] md:text-2xl md:leading-[29px] font-medium text-center mb-4 md:mb-[32px] text-white-2">${e.name}</h3>\n          <div class="movie-bar"><div class="movie-bar__current" id="bar-${e.id}" style="width:${n}%;"></div></div>\n        </div>\n      </div>\n    </div>`})),r.innerHTML=u,void 0!==o&&o.update?.(),r.addEventListener("click",(e=>{const t=e.target.closest("[data-video-id]");if(!t)return;!async function(e){m||await new Promise((e=>{const t=setInterval((()=>{window.YT&&YT.Player&&(clearInterval(t),m=!0,e())}),100)}));a.innerHTML='<div class="player-wrapper"><div id="playerContainer"></div></div>',c=e,l=new YT.Player("playerContainer",{height:"360",width:"640",videoId:e,events:{onReady:t=>function(e,t){const s="video_progress_"+t,o="video_duration_"+t,r=e.target.getDuration();localStorage.setItem(o,r);const n=localStorage.getItem(s);n&&e.target.seekTo(parseFloat(n),!0);d=setInterval((()=>{if(l&&c===t)try{localStorage.setItem(s,l.getCurrentTime())}catch{}}),2e3)}(t,e),onStateChange:t=>function(e,t){const s="video_progress_"+t;if(!l)return;if(e.data===YT.PlayerState.PAUSED||e.data===YT.PlayerState.ENDED)try{localStorage.setItem(s,l.getCurrentTime())}catch{}}(t,e)}})}(t.getAttribute("data-video-id")),p()}));let m=!1;function p(){n.classList.add("active")}window.onYouTubeIframeAPIReady=function(){m=!0};function w(){n.classList.remove("active"),a.innerHTML="",l&&c&&function(){const e="video_progress_"+c,t="video_duration_"+c;try{localStorage.setItem(e,l.getCurrentTime());const s=parseFloat(localStorage.getItem(e))||0,o=parseFloat(localStorage.getItem(t))||0;let r=0;o>0&&(r=s/o*100);const n=document.getElementById("bar-"+c);n&&(n.style.width=r+"%")}catch{}l.destroy(),l=null,d&&(clearInterval(d),d=null),c=null}()}document.querySelector(".search-button").addEventListener("click",(e=>{!function(){const e='<form class="form">\n          <div class="flex border border-dark-blue dark:border-white-2 rounded-[4px] md:rounded-[12px] focus-within:border-orange-2">\n            <input type="text" name="s" class="form__input" placeholder="Search"/>\n            <button type="submit" class="form__button">Send</button>\n          </div>\n        </form>';a.innerHTML=e}(),p()})),i.addEventListener("click",w),n.addEventListener("click",(e=>{e.target.classList.contains("modal")&&w()}));document.querySelectorAll(".accordion").forEach((e=>{const t=e.querySelector(".accordion__button");t.addEventListener("click",(()=>{const s=t.dataset.target,o=document.getElementById(s);document.querySelectorAll(".accordion").forEach((e=>{const t=e.querySelector(".accordion__content");t!==o&&(t.style.maxHeight=null,e.classList.remove("accordion_open"))})),e.classList.contains("accordion_open")?(o.style.maxHeight="0",e.classList.remove("accordion_open")):(e.classList.add("accordion_open"),o.style.maxHeight=o.scrollHeight+"px")}))}));document.getElementById("change-theme-button").addEventListener("click",(e=>{e.preventDefault(),document.documentElement.classList.toggle("dark")})),this.setTimeout((function(){var e=[].slice.call(document.querySelectorAll("img[loading=lazy]")),t=[].slice.call(document.querySelectorAll(".lazy-bg"));if(e.length>0){let t=new IntersectionObserver((function(e,s){e.forEach((function(e){if(e.isIntersecting){let s=e.target;s.src=s.dataset.src,t.unobserve(s)}}))}));e.forEach((function(e){t.observe(e)}))}t.length>0&&t.forEach((function(e){let t=e;t.classList.remove("lazy-bg"),t.style.backgroundImage="url("+t.dataset.src+")"}))}),3e3);const g=document.querySelector("header");window.addEventListener("scroll",(function(){window.scrollY>37?(g.classList.add("fixed"),g.classList.remove("absolute")):(g.classList.remove("fixed"),g.classList.add("absolute"))}));const v=document.querySelectorAll(".section[id]"),f=document.querySelectorAll("#menu a"),h=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target.getAttribute("id"),s=document.querySelector(`#menu a[href="${"/"!==t?"#"+t:t}"]`);e.isIntersecting&&(f.forEach((e=>e.classList.remove("active"))),s&&s.classList.add("active"))}))}),{threshold:.6});v.forEach((e=>h.observe(e)))}));